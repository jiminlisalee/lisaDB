## PHP + MySQL 실습 (3)

💻새로운 table 만들기(media 정보의 추가)
 
 media table 만드는 중 practice DB에서 만들어야 하는데 실습용인 dbp에 만들어.. 다시 시작함..
 왜 media url을 안가져오나 했더니.. 다른 DB에 만듬.. 하.하.하.
 
💻 media table에 데이터 넣기
 practice table로 돌아와서 기존 정보에 media 정보를 추가 했다. 처음으로 작성해 보는 SQL문이 었다. 
 
 * SQL 업데이트 문은 굉장히 위험한 명령어라 꼭 트랜잭션 안에서만 사용해주어야한다.
 트랜잭션이란?? 하나의 처리를 여러단계로 다루는 기능을 트랜잭션 이라고 한다. 하나의 처리를 Commit이라는 명령어를 수행하기 전에 마지막으로 한번 더 확인 할 수 있게 기회를 줌으로서 좀더 안정적인 데이터베이스를 작업하게 한다.
 
 UPDATE 테이블명 SET 칼럼명 = '내용'
 UPDATE 테이블명 SET 칼럼명 = '내용' WHERE 조건문
 
 * LEFT조인 하여 확인
 TABLE1과 TABLE2에 대해서 LEFT JOIN을 하면 TABLE1의 내용은 그대로 있고 TABLE2와 겹치는 부분의 내용을 추출한다. 그리고 TABLE1의 내용과 일치되지 않는 구문은 NULL값을 반환한다.
 
 SELECT 컬럼이름  FROM table1 LEFT JOIN table2 ON table1.칼럼이름 = table2.칼럼이름
 
 💻 query문을 left join 문으로 요청하여 정보얻기
  소스코드로 봐서 퀴리 결과를 가져와도 table2의 url 데이터가 보이질 않았다..
  $article['url']를 추가를 안했음.. 하.하.하.
  
  * htmlspecialchars() 역할
  예를 들어, 사용자가 게시판에 글을 올릴 때 문장 내에 HTML 코드가 들어가는 특수 문자를 포함시켜 입력한 후 화면으로 출력할 때 그 HTML 특수 문자가 HTML 태그로 적용되어 출력되는 것이 아니라, HTML 특수 문자가 일반 문자로 인식되어 그대로 출력되도록 해줍니다. 바로, 다음과 같이 htmlspecialchars() 함수가 적용되면 각각의 HTML 특수 문자들을 일반 문자열로 인식할 수 있도록 바꾸어 줍니다.
  
  ++교수님설명
  사용자의 입력 값 중에 <script> location.href="attack.com"</script> 식의 텍스트를 입력하고, 다시 목록을 불러오면, html 태그로 인식해서, <script> 안의 코드가 동작되어 버립니다. 이러면 악의적인 사이트로 링크를 추가할 수 있고, 다른 사용자가 잘못된 사이트로 이동해버릴 수 있습니다. 그래서 html 태그에서 사용하는 <, > 등의 기호를 &lt, &gt 등의 기호로 바꿔버려서 화면에 출력은 < 로 되나 html 태그로서의 역할을 수행하지 못하도록 하는 하는데 사용하는 함수가 htmlspeci alchars() 입니다. 즉, < 를 입력받으면 &lt 로 바꾸는 겁니다. 이를 통해 크로스 사이트 스크립팅 문제를 대응할 수 있습니다. 

어떤 HTML 코드를 php로작성해야 할까?

변하는 부분과 변하지 않는 부분으로 구분해서 변하는 부분은 php로 작성한다

 
💻 php의 헤더란?
데이터가 성공적으로 입력이 완료되면 , 별도의 클릭 과정 없이 바로 media페이지를 다시보여주는 기능
header ("Location : 주소,혹은 php파일); 로 길을 안내한다.(브라우져 리 다이렉트)
  
  
  
 ✨ 테이블을 update하는 경우나 delete하는 경우는 실무에선 트랜잭션을 이용해서 사용하는 습관을 들이는것이 중요하다고 생각한다. 아직까지 완벽하게 이해되지 않은 php라.. 아쉽다. 스스로 반복하고 코드해석을 하고 익숙해지는 것이 필요하다 생각한다. 백엔드와 프론트엔드, DB 를 동시에 하니 뭔가 좀 더 이해가 잘된다고 생각한다. 사실 항상 프론트 따로 백엔드 따로 배웠기 때문에 백엔드로 post를 하면 source보는 것만으로는 전혀 감이 잡히지 않았다. 그러나 html 로 뼈대를 잡고 보니 어렵지만.. 시각적인 효과가 더해져 수월하다.

https://youtu.be/UigpdHidFeQ 실행해보기
